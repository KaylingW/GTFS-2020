import React, {useEffect, useState} from 'react';
import { Map as LeafletMap, TileLayer, Marker, Popup, Polyline } from 'react-leaflet';
let API = {
    getShape :
    [[25.7895, -80.1884], [25.7895, -80.1891], [25.7895, -80.1907], [25.7894, -80.1923], [25.7894, -80.1932], [25.7894, -80.1946], [25.7912, -80.1947], [25.7917, -80.1947], [25.7938, -80.1947], [25.7952, -80.1948], [25.7955, -80.1948], [25.7955, -80.1949], [25.7955, -80.1958], [25.7954, -80.1979], [25.7954, -80.1984], [25.7954, -80.1988], [25.7958, -80.1989], [25.7967, -80.1989], [25.7968, -80.1989], [25.7975, -80.1989], [25.7979, -80.1989], [25.799, -80.199], [25.8005, -80.199], [25.8007, -80.199], [25.8014, -80.1991], [25.8015, -80.1969], [25.8015, -80.1966], [25.8015, -80.1951], [25.8024, -80.1951], [25.8031, -80.1951], [25.8041, -80.1952], [25.8044, -80.1952], [25.8054, -80.1952], [25.8072, -80.1952], [25.8085, -80.1953], [25.8103, -80.1954], [25.8103, -80.1954], [25.8103, -80.197], [25.8102, -80.1993], [25.8098, -80.1993], [25.8083, -80.1992], [25.8067, -80.1992], [25.8046, -80.1991], [25.803, -80.199], [25.8022, -80.199], [25.8019, -80.199], [25.8005, -80.199], [25.8, -80.199], [25.7992, -80.199], [25.7988, -80.1989], [25.7982, -80.1989], [25.7968, -80.1989], [25.7967, -80.1989], [25.7967, -80.1988], [25.7967, -80.1986], [25.7967, -80.1977], [25.7968, -80.1965], [25.7968, -80.1957], [25.7968, -80.1948], [25.7957, -80.1947], [25.7953, -80.1947], [25.7943, -80.1947], [25.7933, -80.1947], [25.7924, -80.1946], [25.7916, -80.1946], [25.7916, -80.1944], [25.7917, -80.1923], [25.7904, -80.1923], [25.7895, -80.1922], [25.7895, -80.1905], [25.7895, -80.189], [25.7897, -80.189], [25.7921, -80.189], [25.7923, -80.1889], [25.7923, -80.1882], [25.7923, -80.1876], [25.792, -80.1872], [25.7921, -80.187], [25.7912, -80.187], [25.7903, -80.187], [25.7898, -80.187], [25.7897, -80.187], [25.7896, -80.187], [25.7895, -80.1872], [25.7895, -80.1877], [25.7895, -80.1884]]
};

const MapComponent = (props) => {

    const [latitude, setLatitude] = useState(25.7574);
    const [longitude, setLongitude] = useState(-80.3733);
    const [zoom, setZoom] = useState(17);
    const [shape, setShape] = useState([]);

    // This useEffect runs when the component is loaded, we're calling
    // the "API" to get the shape and set it to our state variable

    //Todo ask fulton how to get this to run on props change
    // useEffect(() => {
    //     function newShape(){
    //         setShape(props.trips[0].shape_info);
    //     }
    //
    //     newShape()
    // }, [props.trips]);

    useEffect(() => {
        setShape(API.getShape);
    }, []);

    return (
        <LeafletMap center={[25.7601, -80.3744]} zoom={18}>
            <TileLayer
                attribution='&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
                url='https://{s}.tile.osm.org/{z}/{x}/{y}.png'
            />
            <Marker position={[25.7601, -80.3744]}>
                <Popup>
                    <div>
                        <h2>FIU Parking Garage 6</h2>
                    </div>
                </Popup>
            </Marker>
            <Polyline positions={shape}>
                <Popup>
                    <div>
                        <h2>really dumb line</h2>
                    </div>
                </Popup>
            </Polyline>
        </LeafletMap>
    )
};

export default MapComponent;